<nav class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 h-16"
     [class.bg-white/80]="!menuOpen"
     [class.backdrop-blur-md]="!menuOpen"
     [class.shadow-sm]="!menuOpen"
     [class.bg-blue-600]="menuOpen">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full">
    <div class="flex justify-between items-center h-full">
      <!-- Logo -->
      <div class="flex-shrink-0 flex items-center">
        <a routerLink="/" class="flex items-center gap-2 group">
          <div class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg group-hover:rotate-6 transition-transform duration-300">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
          </div>
          <span class="text-xl font-bold tracking-tight transition-colors duration-300"
                [class.text-gray-900]="!menuOpen"
                [class.text-white]="menuOpen">
          </span>
        </a>
      </div>

      <!-- Desktop Menu -->
      <div class="hidden md:flex md:items-center space-x-1">
        <a routerLink="/admin/dashboard" 
           *ngIf="hasRole('Manager')" 
           routerLinkActive="bg-blue-50 text-blue-600"
           [routerLinkActiveOptions]="{exact: true}"
           class="px-4 py-2 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200">
           Dashboard
        </a>

        <a routerLink="/colis" 
           *ngIf="hasRole('Manager') || hasRole('Livreur')" 
           routerLinkActive="bg-blue-50 text-blue-600"
           class="px-4 py-2 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200">
           Colis
        </a>

        <a routerLink="/clients" 
           *ngIf="hasRole('Manager')" 
           routerLinkActive="bg-blue-50 text-blue-600"
           class="px-4 py-2 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200">
           Clients
        </a>

        <div class="h-6 w-px bg-gray-200 mx-2" *ngIf="isLoggedIn()"></div>

        <a routerLink="/profile" 
           *ngIf="isLoggedIn()" 
           routerLinkActive="bg-blue-50 text-blue-600"
           class="px-4 py-2 rounded-lg text-sm font-medium text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 flex items-center gap-2">
           <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
           </svg>
           Profil
        </a>

        <a routerLink="/auth/login" 
           *ngIf="!isLoggedIn()" 
           class="ml-4 px-6 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 shadow-md hover:shadow-lg transition-all duration-200 transform hover:-translate-y-0.5">
           Login
        </a>

        <button (click)="logout()" 
                *ngIf="isLoggedIn()" 
                class="ml-2 px-4 py-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 flex items-center gap-2">
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
          </svg>
        </button>
      </div>

      <!-- Mobile menu button -->
      <div class="flex items-center md:hidden">
        <button (click)="toggleMenu()" 
                class="p-2 rounded-lg transition-colors duration-200 hover:bg-gray-100 focus:outline-none"
                [class.text-white]="menuOpen"
                [class.text-gray-600]="!menuOpen">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path *ngIf="!menuOpen" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            <path *ngIf="menuOpen" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div *ngIf="menuOpen" class="md:hidden absolute top-16 left-0 right-0 bg-blue-600 text-white shadow-2xl animate-fade-in-down">
    <div class="px-4 py-6 space-y-2">
      <a routerLink="/admin/dashboard" (click)="toggleMenu()" *ngIf="hasRole('Manager')" 
         routerLinkActive="bg-blue-700 shadow-inner"
         class="block px-4 py-3 rounded-xl font-medium hover:bg-blue-500 transition-colors duration-200">
         Dashboard
      </a>
      <a routerLink="/colis" (click)="toggleMenu()" *ngIf="hasRole('Manager') || hasRole('Livreur')" 
         routerLinkActive="bg-blue-700 shadow-inner"
         class="block px-4 py-3 rounded-xl font-medium hover:bg-blue-500 transition-colors duration-200">
         Colis
      </a>
      <a routerLink="/clients" (click)="toggleMenu()" *ngIf="hasRole('Manager')" 
         routerLinkActive="bg-blue-700 shadow-inner"
         class="block px-4 py-3 rounded-xl font-medium hover:bg-blue-500 transition-colors duration-200">
         Clients
      </a>
      <div class="border-t border-blue-500 my-4"></div>
      <a routerLink="/profile" (click)="toggleMenu()" *ngIf="isLoggedIn()" 
         routerLinkActive="bg-blue-700 shadow-inner"
         class="block px-4 py-3 rounded-xl font-medium hover:bg-blue-500 transition-colors duration-200">
         Profil
      </a>
      <a routerLink="/auth/login" (click)="toggleMenu()" *ngIf="!isLoggedIn()" 
         class="block px-4 py-3 rounded-xl font-semibold bg-white text-blue-600 text-center shadow-lg">
         Login
      </a>
      <button (click)="logout(); toggleMenu()" *ngIf="isLoggedIn()" 
         class="w-full px-4 py-3 rounded-xl font-medium bg-red-500/20 hover:bg-red-500 transition-colors duration-200 text-left flex items-center justify-between">
         <span>Logout</span>
         <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
         </svg>
      </button>
    </div>
  </div>
</nav>

<!-- Spacer to prevent content from jumping under fixed navbar -->
<div class="h-16"></div>
