<aside
    class="fixed inset-y-0 left-0 z-50 w-72 bg-white/80 backdrop-blur-xl border-r border-neutral-100 shadow-soft-lg transform transition-transform duration-300 md:translate-x-0"
    [class.-translate-x-full]="!isOpen">

    <!-- Logo Area -->
    <div class="h-24 flex items-center px-8 border-b border-neutral-50">
        <a routerLink="/" class="flex items-center gap-3 group">
            <div
                class="w-10 h-10 bg-gradient-to-br from-primary-600 to-primary-700 rounded-xl flex items-center justify-center shadow-glow text-white transform group-hover:rotate-6 transition-transform">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
            </div>
            <span class="text-2xl font-bold text-neutral-900 font-display tracking-tight">SmartLogi</span>
        </a>
    </div>

    <!-- Navigation -->
    <nav class="p-4 space-y-2 overflow-y-auto h-[calc(100vh-6rem)] custom-scrollbar">

        <!-- Menu Label -->
        <div class="px-4 mt-4 mb-2">
            <span class="text-xs font-bold text-neutral-400 uppercase tracking-widest">Main Menu</span>
        </div>

        <a routerLink="/admin/dashboard" *ngIf="hasRole('GESTIONNAIRE')"
            routerLinkActive="bg-primary-50 text-primary-700 shadow-sm"
            class="flex items-center gap-3 px-4 py-3.5 rounded-2xl text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900 transition-all font-medium group">
            <div class="w-8 h-8 rounded-lg bg-neutral-100 flex items-center justify-center text-neutral-500 group-hover:bg-white group-hover:text-primary-600 transition-colors"
                routerLinkActive="bg-white text-primary-600 !bg-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                </svg>
            </div>
            <span>Dashboard</span>
        </a>

        <a routerLink="/colis"
            *ngIf="hasRole('GESTIONNAIRE') || hasRole('LIVREUR') || hasRole('CLIENT') || hasRole('Receiver')"
            routerLinkActive="bg-primary-50 text-primary-700 shadow-sm"
            class="flex items-center gap-3 px-4 py-3.5 rounded-2xl text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900 transition-all font-medium group">
            <div class="w-8 h-8 rounded-lg bg-neutral-100 flex items-center justify-center text-neutral-500 group-hover:bg-white group-hover:text-primary-600 transition-colors"
                routerLinkActive="bg-white text-primary-600 !bg-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
                </svg>
            </div>
            <span>Parcels</span>
        </a>

        <a routerLink="/clients" *ngIf="hasRole('GESTIONNAIRE')"
            routerLinkActive="bg-primary-50 text-primary-700 shadow-sm"
            class="flex items-center gap-3 px-4 py-3.5 rounded-2xl text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900 transition-all font-medium group">
            <div class="w-8 h-8 rounded-lg bg-neutral-100 flex items-center justify-center text-neutral-500 group-hover:bg-white group-hover:text-primary-600 transition-colors"
                routerLinkActive="bg-white text-primary-600 !bg-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
            </div>
            <span>Clients</span>
        </a>

        <!-- User Profile Section at Bottom -->
        <div class="mt-auto pt-8">
            <div class="px-4 mb-2">
                <span class="text-xs font-bold text-neutral-400 uppercase tracking-widest">Account</span>
            </div>

            <a routerLink="/profile" *ngIf="isLoggedIn()" routerLinkActive="bg-primary-50 text-primary-700 shadow-sm"
                class="flex items-center gap-3 px-4 py-3.5 rounded-2xl text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900 transition-all font-medium group">
                <div class="w-8 h-8 rounded-full bg-neutral-200 flex items-center justify-center text-neutral-600 font-bold text-xs"
                    routerLinkActive="bg-primary-200 text-primary-800">
                    PR
                </div>
                <span>Profile</span>
            </a>

            <button (click)="logout()" *ngIf="isLoggedIn()"
                class="w-full flex items-center gap-3 px-4 py-3.5 rounded-2xl text-secondary-600 hover:bg-secondary-50 transition-all font-medium group mt-1">
                <div
                    class="w-8 h-8 rounded-lg bg-secondary-50 flex items-center justify-center text-secondary-500 group-hover:text-secondary-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                </div>
                <span>Logout</span>
            </button>

            <a routerLink="/auth/login" *ngIf="!isLoggedIn()"
                class="flex items-center justify-center gap-2 px-4 py-3.5 rounded-2xl bg-neutral-900 text-white font-bold shadow-lg hover:shadow-xl hover:bg-black transition-all mt-4 mx-2">
                <span>Sign In</span>
            </a>
        </div>

    </nav>
</aside>

<!-- Overlay for mobile -->
<div *ngIf="isOpen" (click)="close()"
    class="fixed inset-0 bg-neutral-900/20 backdrop-blur-sm z-40 md:hidden animate-fade-in"></div>

<!-- Mobile Toggle Button (Visible only on small screens) -->
<button (click)="toggle()"
    class="fixed top-4 right-4 z-50 p-2 bg-white rounded-xl shadow-lg border border-neutral-100 md:hidden text-neutral-600">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" *ngIf="!isOpen" fill="none" viewBox="0 0 24 24"
        stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" *ngIf="isOpen" fill="none" viewBox="0 0 24 24"
        stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
    </svg>
</button>